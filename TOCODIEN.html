<!doctype html>
<!-- ============================================
     FILE HTML ĐẦY ĐỦ – CHÚ THÍCH TIẾNG VIỆT 100%
     ============================================ -->
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Tiêu đề trang -->
  <title>TỔ CƠ ĐIỆN</title>

  <!-- ============================================
       CSS BÊN NGOÀI – Bootstrap & Bootstrap Icons
       ============================================ -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/livecanvas-team/ninjabootstrap/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"/>

  <!-- ============================================
       CSS THEME & LAYOUT
       - Khai báo biến màu
       - Layout sticky 3 lớp
       - Banner Kaizen
       - Navbar
       - Content + Scrollbar
       ============================================ -->
  <style>
    /* ========== Token màu & biến layout ========== */
    :root{
      --bg: #0f172a;
      --surface: #111827;
      --surface-2: #1f2937;
      --surface-3: #0b1221;
      --text: #e5e7eb;
      --muted: #9ca3af;

      --primary: #3b82f6;
      --primary-600: #2563eb;
      --primary-200: #bfdbfe;

      --border: #213045;
      --border-hover: #3b82f6;

      --bottom-bg: #0b1221;
      --bottom-border: #1e293b;
      --active-pill: #172554;

      /* Chiều cao các layer sticky */
      --h-header: 64px;
      --gap-hb: 12px;
      --h-banner: 104px;
      --gap-bm: 10px;

      --radius: 10px;
      --banner-maxw: 1400px;
    }

    html, body { height: 100%; margin: 0; }
    body { background: var(--bg); color: var(--text); display:flex; flex-direction:column; }

    /* ========== HEADER CỐ ĐỊNH LỚP 1 ========== */
    .top-header{
      position: sticky; top: 0; z-index: 1040;
      width: 100%; height: var(--h-header);
      background: linear-gradient(180deg, #0b1221 0%, #0d1627 100%);
      border-bottom: 1px solid var(--border);
      display: flex; align-items: center; justify-content: center;
    }
    .top-header h1{
      margin: 0; font-weight: 650; letter-spacing: .8px;
      font-size: clamp(1.1rem, 2.15vw, 1.55rem);
      color: var(--primary-200);
      text-shadow: 0 0 6px rgba(59,130,246,.38);
    }

    /* ========== KAIZEN BANNER – LỚP STICKY 2 ========== */
    .kaizen-wrap { height: calc(var(--h-banner) + var(--gap-hb)); }
    .kaizen-banner{
      position: sticky; top: var(--h-header); z-index: 1036;
      width: 100%; display:flex; justify-content:center;
      padding-top: var(--gap-hb);
    }
    .kb-surface{
      position: relative; width: 100%; max-width: var(--banner-maxw);
      height: var(--h-banner);
      background: linear-gradient(180deg, #0b1221 0%, #0e1830 60%, #0b1221 100%);
      border: 1px solid rgba(59,130,246,.25); border-radius: var(--radius);
      overflow: hidden;
    }

    .kb-layer{ position:absolute; inset:0; pointer-events:none; }

    /* Grid nền banner */
    .kb-grid{
      background:
        linear-gradient(transparent 90%, rgba(32,64,120,.25) 100%),
        repeating-linear-gradient(to right, rgba(59,130,246,.08) 0 1px, transparent 1px 24px),
        repeating-linear-gradient(to bottom, rgba(59,130,246,.08) 0 1px, transparent 1px 24px);
      opacity:.55;
    }

    /* Ánh sáng */
    .kb-glow{
      background:
        radial-gradient(1200px 180px at 20% 120%, rgba(59,130,246,.30), rgba(59,130,246,0)),
        radial-gradient(900px 160px at 85% -20%, rgba(56,189,248,.25), rgba(56,189,248,0));
      mix-blend-mode: screen;
      opacity:.9;
    }

    /* Vệt sáng chạy ngang banner */
    .kb-streak::before{
      content:""; position:absolute; left:-45%; top:-150%;
      width:80%; height:400%; transform: rotate(18deg);
      background: linear-gradient(90deg,
        rgba(59,130,246,0),
        rgba(148,197,255,.22),
        rgba(148,197,255,.35),
        rgba(148,197,255,.22),
        rgba(59,130,246,0));
      filter: blur(6px);
      animation: kbSweep 9s linear infinite;
      opacity:.45;
    }
    @keyframes kbSweep{ 0%{ left:-45%; } 100%{ left:105%; } }

    /* Text trong banner */
    .kb-inner{ position: relative; height: 100%; display:flex; align-items:center; justify-content:center; padding: 0 24px; }
    .kb-text{ line-height:1.15; animation: kbFade .6s ease-out both; text-align:center; }
    @keyframes kbFade{ from{ transform: translateY(6px); opacity:0; } to{ opacity:1; transform:none; } }

    .kb-title-1, .kb-title-2{
      font-weight: 400; letter-spacing:.06em; text-transform: uppercase;
      color: var(--primary-200); text-shadow: 0 0 8px rgba(59,130,246,.45);
    }
    .kb-title-1{ font-size: clamp(16px, 1.35vw, 19px); }
    .kb-title-2{ font-size: clamp(14px, 1.55vw, 17px); }

    /* Divider trang trí */
    .kb-div{
      display:flex; gap:12px; margin-top:4px; color:#d3e2ff; opacity:.9;
      align-items:center; justify-content:center;
    }

    /* Dòng 5S */
    .kb-5s{ margin-top:6px; font-size: clamp(11px, 1.3vw, 13.5px); color:#c9d7ff; }

    /* ========== NAVBAR – LỚP STICKY 3 ========== */
    .navbar-dark.bg-dark {
      position: sticky;
      top: calc(var(--h-header) + var(--gap-hb) + var(--h-banner) + var(--gap-bm));
      z-index: 1032;
      background: linear-gradient(180deg, #0b1221, #0d1627) !important;
      border-bottom: 1px solid var(--border);
      border-radius: var(--radius);
      margin: 0 auto;
      max-width: var(--banner-maxw);
    }

    .nav-link.active, .nav-link:hover{ color: var(--primary) !important; }

    /* ========== NỘI DUNG + IFRAMES ========== */
    .content-wrapper{ flex:1; display:flex; flex-direction:column; background:var(--surface-2); }
    .frame-wrap{ flex:1; position:relative; }
    iframe{
      position:absolute; inset:0; width:100%; height:100%;
      border:none; background: var(--surface-3); display:none;
    }
    iframe.active{ display:block; }

    /* ========== BOTTOM NAV CHO MOBILE ========== */
    .bottom-nav{
      position: fixed; left:0; right:0; bottom:0;
      height:60px; background:var(--bottom-bg);
      border-top:1px solid var(--bottom-border);
      display:none; z-index:1031;
      border-top-left-radius:var(--radius);
      border-top-right-radius:var(--radius);
    }
    @media(max-width:991.98px){
      .bottom-nav{ display:block; }
      .content-wrapper{ padding-bottom:60px; }
    }

    /* Scrollbar trang */
    *::-webkit-scrollbar{ width:10px; height:10px; }
    *::-webkit-scrollbar-thumb{ background:#20304a; border-radius:8px; }
    *::-webkit-scrollbar-thumb:hover{ background:#2a4470; }
    *::-webkit-scrollbar-track{ background:#0c1322; }
  </style>
</head>

<body>

<!-- ============================================
     HEADER – LỚP STICKY THỨ 1
     ============================================ -->
<header class="top-header">
  <div class="th-inner"><h1>TỔ CƠ ĐIỆN</h1></div>
</header>

<!-- ============================================
     KAIZEN BANNER – LỚP STICKY THỨ 2
     ============================================ -->
<div class="kaizen-wrap">
  <div class="kaizen-banner">
    <div class="kb-surface border-e2">
      <div class="kb-layer kb-grid"></div>
      <div class="kb-layer kb-glow"></div>
      <div class="kb-layer kb-streak"></div>

      <div class="kb-inner container-fluid">
        <div class="kb-text">
          <div class="kb-title-1">CHỦ ĐỘNG ✦ SÁNG TẠO ✦ HIỆU QUẢ </div>
          <div class="kb-div"><span>✦</span></div>
          <div class="kb-title-2">KAIZEN - KHÔNG NGỪNG CẢI TIẾN</div>
          <div class="kb-div"><span>✦</span></div>

          <!-- Chuỗi 5S -->
          <div class="kb-5s">
            Seiri (Sàng lọc) • Seiton (Sắp xếp) • Seiso (Sạch sẽ) •
            Seiketsu (Săn sóc) • Shitsuke (Sẵn sàng)
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ============================================
     MENU – LỚP STICKY THỨ 3
     ============================================ -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow sticky-top" style="z-index:1030;">
  <div class="container-fluid">

    <!-- Nút thu gọn mobile -->
    <button class="navbar-toggler collapsed" type="button"
      data-bs-toggle="collapse" data-bs-target="#navbar-content">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Danh sách menu -->
    <div class="collapse navbar-collapse" id="navbar-content">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li><a class="nav-link" data-target="mainFrame">TRANG CHỦ</a></li>
        <li><a class="nav-link iframe-link" data-target="taskListFrame">BẢNG CÔNG VIỆC</a></li>
        <li><a class="nav-link iframe-link" data-target="planListFrame">DỰ KIẾN</a></li>
        <li><a class="nav-link iframe-link" data-target="maintListFrame">BẢO DƯỠNG</a></li>
        <li><a class="nav-link iframe-link" data-target="MTCVFrame">PHÂN CÔNG</a></li>
        <li><a class="nav-link iframe-link" data-target="WaterRecordFrame">CHỈ SỐ NƯỚC</a></li>
        <li><a class="nav-link iframe-link" data-target="TaskReportFrame">BÁO CÁO</a></li>
        <li><a class="nav-link iframe-link" data-target="chamcongFrame">CHẤM CÔNG</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- ============================================
     KHU VỰC IFRAME – HIỂN THỊ MODULE
     ============================================ -->
<div class="content-wrapper">
  <div class="frame-wrap">
    <iframe id="mainFrame" src=""></iframe>
    <iframe id="taskListFrame"  src="https://script.google.com/macros/s/AKfycbyHry8Kk9_0ZyCfy3nZhVIrxKrENmSf5vsnPW-xxoUUbxRuOg1wYcUjdnT9x3i9urw/exec"></iframe>
    <iframe id="planListFrame"  src="https://script.google.com/macros/s/AKfycby6kstI0YU3rdAR7txXXudD_83JET2x7AzFzufPdOmxuz4xS0M35tsGn4i1z9CGXA-C/exec"></iframe>
    <iframe id="maintListFrame" src="https://script.google.com/macros/s/AKfycbxeuGMrHlOt03JdRXAeU-JBQn-hoOF0SOuX1_gH9VAGZ6dxQ8HOqnb9WGvn5ZOH1mCt9g/exec"></iframe>
    <iframe id="MTCVFrame"     src="https://script.google.com/macros/s/AKfycbyK1iyc0eck7seY7kqmGOb6V1MYVv_Ue43q2dYzKFeby329xHaQBtFj2WdDweW46NLA/exec"></iframe>
    <iframe id="WaterRecordFrame"  src="https://script.google.com/macros/s/AKfycbwTbLHDiGjq4rcUwb6b6MLBM_junEEcJdVAlzZt1C25phiwIQG4uBnSEqpFu98I1wE/exec"></iframe>
    <iframe id="TaskReportFrame"   src="https://script.google.com/macros/s/AKfycbzwCj7p9fYzDMmeoEMnmdSmG__XTMAdEoBi17GLPR-r5gPXpoiypiK7GVdK3yodP0iT/exec"></iframe>
    <iframe id="DXVTFrame"         src="https://script.google.com/macros/s/AKfycbzrrIMJ4N5ymEMEV6EkOQy2qTH1ApZtdb4bn8h1sLPbCUE-upwxxlW-tvyNWOzAuwmX/exec"></iframe>
    <iframe id="MotorCurrentFrame" src="https://script.google.com/macros/s/AKfycbxpHonjPCZ9Vin42ZATGEPGD09XWZ8MI76MI1kuE3lwHKV09_Yb_XeL193SVvnrSthe/exec"></iframe>
    <iframe id="chamcongFrame"     src="https://script.google.com/macros/s/AKfycbxG7IU2Nvv4IFmmcZnu4N_SWaNAKRYnNzElRan5ZiAaNqjb2GRdRpg-yyYCIZ95Gc6y2w/exec"></iframe>
    <iframe id="bearingFrame" src="https://script.google.com/macros/s/AKfycbww7MA7xaZG2UJQWAc0NBwbl-bZPcjmic5XOUDFk_NR7OylFdv3OG2rxUUXRGy1w1BD/exec"></iframe>
    <iframe id="vbeltsFrame" src=""></iframe>
  </div>
</div>

<!-- ============================================
     BOTTOM NAV – DÀNH CHO MOBILE
     ============================================ -->
<nav class="bottom-nav d-lg-none">
  <div class="bn-inner">
    <a class="bn-btn" data-target="mainFrame"><i class="bi bi-house"></i><div>Trang chủ</div></a>
    <a class="bn-btn" data-target="taskListFrame"><i class="bi bi-card-checklist"></i><div>Công việc</div></a>
    <a class="bn-btn" data-target="planListFrame"><i class="bi bi-calendar-event"></i><div>Dự kiến</div></a>
    <a class="bn-btn" data-target="maintListFrame"><i class="bi bi-gear"></i><div>Bảo dưỡng</div></a>
    <a class="bn-btn" data-target="TaskReportFrame"><i class="bi bi-graph-up"></i><div>Báo cáo</div></a>
  </div>
</nav>

<!-- ============================================
     SCRIPT NGOÀI – Bootstrap
     ============================================ -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" defer></script>

<!-- ============================================
     APP SCRIPT – ĐIỀU HƯỚNG IFRAME
     ============================================ -->
<script defer>
/* Điều khiển chuyển đổi giữa các iframe khi click menu */
window.addEventListener('DOMContentLoaded', function () {

  const menuLinks = document.querySelectorAll('.iframe-link, .nav-link[data-target]');
  const bottomBtns = document.querySelectorAll('.bottom-nav .bn-btn[data-target]');
  const frames = document.querySelectorAll('iframe');

  /* Collapse menu cho mobile */
  const navbarCollapseEl = document.getElementById('navbar-content');
  const navCollapse = new bootstrap.Collapse(navbarCollapseEl, { toggle: false });

  function collapseIfMobile(){
    if(window.matchMedia('(max-width: 991.98px)').matches) navCollapse.hide();
  }

  /* Set trạng thái active cho menu */
  function setActiveLink(targetId){
    menuLinks.forEach(l=>{
      l.classList.toggle('active', l.getAttribute('data-target')===targetId);
    });
    bottomBtns.forEach(b=>{
      b.classList.toggle('active', b.getAttribute('data-target')===targetId);
    });
  }

  /* Hiển thị iframe tương ứng */
  function activateFrame(targetId){
    frames.forEach(f=>f.classList.remove('active'));
    const t=document.getElementById(targetId);
    if(t) t.classList.add('active');

    try{ localStorage.setItem('lastFrameId',targetId);}catch(e){}
    setActiveLink(targetId);
  }

  /* Xử lý click menu */
  function handleClick(e){
    e.preventDefault();
    const targetId=this.getAttribute('data-target');
    if(!targetId) return;
    activateFrame(targetId);
    collapseIfMobile();
  }

  menuLinks.forEach(l=>l.addEventListener('click',handleClick));
  bottomBtns.forEach(b=>b.addEventListener('click',handleClick));

  /* Khôi phục iframe cuối cùng */
  let defaultFrame='mainFrame';
  try{
    const saved=localStorage.getItem('lastFrameId');
    if(saved && document.getElementById(saved)) defaultFrame=saved;
  }catch(e){}
  activateFrame(defaultFrame);
});
</script>

</body>
</html>
